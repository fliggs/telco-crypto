enum InvoiceStatus {
  PENDING
  PAID
  VOID
  REFUNDED
}

model Invoice {
  id         String        @id @default(uuid()) @db.Uuid
  status     InvoiceStatus
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @default(now()) @updatedAt
  invoicedAt DateTime
  paidAt     DateTime?
  refundedAt DateTime?
  voidedAt   DateTime?
  totalCost  Decimal       @db.Decimal(19, 4)

  orderId String @db.Uuid
  order   Order  @relation(fields: [orderId], references: [id])

  items        InvoiceItem[]
  billingData  InvoiceBillingData[]
  creditUsages CreditUsage[]
}

model InvoiceItem {
  id          String   @id @default(uuid()) @db.Uuid
  createdAt   DateTime @default(now())
  updatedAt   DateTime @default(now()) @updatedAt
  name        String
  title       String
  description String
  amount      Int
  costPerItem Decimal  @db.Decimal(19, 4)
  totalCost   Decimal  @db.Decimal(19, 4)

  invoiceId String  @db.Uuid
  invoice   Invoice @relation(fields: [invoiceId], references: [id])
}
