enum CreditSource {
  PROMO_CODE
  CUSTOM
}

model Credit {
  id           String   @id @default(uuid()) @db.Uuid
  createdAt    DateTime @default(now())
  updatedAt    DateTime @default(now()) @updatedAt
  providedCost Decimal  @db.Decimal(19, 4)
  usedCost     Decimal  @db.Decimal(19, 4)
  content      Json /// [ContentData]

  userId String @db.Uuid
  user   User   @relation(fields: [userId], references: [id])

  subscriptionId String?       @db.Uuid
  subscription   Subscription? @relation(fields: [subscriptionId], references: [id])

  usages CreditUsage[]
}

model CreditUsage {
  id        String   @id @default(uuid()) @db.Uuid
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
  usedCost  Decimal  @db.Decimal(19, 4)

  creditId String @db.Uuid
  credit   Credit @relation(fields: [creditId], references: [id])

  orderId String @db.Uuid
  order   Order  @relation(fields: [orderId], references: [id])

  invoiceId String  @db.Uuid
  invoice   Invoice @relation(fields: [invoiceId], references: [id])
}
